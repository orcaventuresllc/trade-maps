<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WordPress Compatible Map - Copy Everything Below</title>
</head>
<body>

<!-- ============================================= -->
<!-- COPY EVERYTHING BELOW THIS LINE TO WORDPRESS -->
<!-- ============================================= -->

<style>
#insurance-map-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.map-header {
    text-align: center;
    margin-bottom: 30px;
}

.map-header h2 {
    font-size: 28px;
    font-weight: 600;
    color: #1a1a1a;
}

.metric-toggles {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.metric-btn {
    padding: 10px 20px;
    border: 2px solid #ddd;
    background: white;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s;
}

.metric-btn:hover {
    background: #f5f5f5;
}

.metric-btn.active {
    background: #2563eb;
    color: white;
    border-color: #2563eb;
}

.map-wrapper {
    background: #f9fafb;
    border-radius: 12px;
    padding: 20px;
}

.state-path {
    stroke: #fff;
    stroke-width: 0.5;
    cursor: pointer;
    transition: all 0.2s;
    fill: #e5e7eb;
}

.state-path:hover {
    stroke: #333;
    stroke-width: 1.5;
}

.heat-0 { fill: #fee2e2; }
.heat-1 { fill: #fecaca; }
.heat-2 { fill: #fca5a5; }
.heat-3 { fill: #f87171; }
.heat-4 { fill: #ef4444; }
.heat-5 { fill: #dc2626; }
.heat-6 { fill: #b91c1c; }
.heat-7 { fill: #991b1b; }

.info-card {
    margin-top: 20px;
    padding: 20px;
    background: white;
    border-radius: 8px;
    text-align: center;
}

.state-name {
    font-size: 24px;
    font-weight: 600;
    color: #2563eb;
    margin-bottom: 10px;
}

.metric-value {
    font-size: 32px;
    font-weight: 700;
    color: #1a1a1a;
}
</style>

<div id="insurance-map-container">
    <div class="map-header">
        <h2>Carpenter Insurance Cost Metrics by State</h2>
    </div>
    
    <div class="metric-toggles">
        <button class="metric-btn active" data-metric="glPremium">GL Premium %</button>
        <button class="metric-btn" data-metric="glSavings">GL Savings %</button>
        <button class="metric-btn" data-metric="wcRate">WC Rate</button>
    </div>
    
    <div class="map-wrapper">
        <div id="map-container">
            <!-- SVG will be inserted here by JavaScript -->
        </div>
    </div>
    
    <div class="info-card">
        <div class="state-name">Select a State</div>
        <div class="metric-value">--</div>
    </div>
</div>

<script>
// WordPress-Safe ES5 JavaScript - No ES6, No Inline Handlers
(function() {
    'use strict';
    
    // Wait for DOM to be fully loaded
    function init() {
        console.log('WordPress map initializing...');
        
        // Simple state data
        var stateData = {
            glPremium: {
                AL: 0.95, CA: 1.0, TX: 0.8, FL: 0.85, NY: 0.75
            },
            glSavings: {
                AL: 27.7, CA: 35.8, TX: 21.2, FL: 29.5, NY: 28.9
            },
            wcRate: {
                AL: 6.14, CA: 5.62, TX: 3.55, FL: 6.23, NY: 9.50
            }
        };
        
        var currentMetric = 'glPremium';
        
        // Create simple rectangles for demo (replace with real SVG paths)
        var mapContainer = document.getElementById('map-container');
        if (!mapContainer) {
            console.error('Map container not found');
            return;
        }
        
        // Create SVG with simple state rectangles for demo
        var svgHTML = '<svg width="600" height="400" viewBox="0 0 600 400">';
        svgHTML += '<rect id="state-AL" class="state-path" x="400" y="250" width="40" height="40"/>';
        svgHTML += '<rect id="state-CA" class="state-path" x="50" y="150" width="40" height="60"/>';
        svgHTML += '<rect id="state-TX" class="state-path" x="250" y="280" width="60" height="50"/>';
        svgHTML += '<rect id="state-FL" class="state-path" x="450" y="320" width="50" height="30"/>';
        svgHTML += '<rect id="state-NY" class="state-path" x="480" y="100" width="40" height="30"/>';
        svgHTML += '</svg>';
        
        mapContainer.innerHTML = svgHTML;
        
        // Function to update colors
        function updateColors() {
            var data = stateData[currentMetric];
            var states = document.querySelectorAll('.state-path');
            
            for (var i = 0; i < states.length; i++) {
                var state = states[i];
                var stateCode = state.id.replace('state-', '');
                var value = data[stateCode];
                
                // Remove old heat classes
                for (var j = 0; j <= 7; j++) {
                    state.classList.remove('heat-' + j);
                }
                
                // Add new heat class
                if (value !== undefined) {
                    var heat = Math.floor(Math.random() * 8); // Simplified
                    state.classList.add('heat-' + heat);
                }
            }
        }
        
        // Handle state click
        function handleStateClick(event) {
            var stateId = event.target.id;
            if (!stateId || stateId.indexOf('state-') !== 0) return;
            
            var stateCode = stateId.replace('state-', '');
            var nameEl = document.querySelector('.state-name');
            var valueEl = document.querySelector('.metric-value');
            
            if (nameEl) nameEl.textContent = stateCode;
            if (valueEl) {
                var value = stateData[currentMetric][stateCode];
                valueEl.textContent = value || '--';
            }
        }
        
        // Handle metric button click
        function handleMetricClick(event) {
            var button = event.target;
            if (!button.classList.contains('metric-btn')) return;
            
            // Update active button
            var buttons = document.querySelectorAll('.metric-btn');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('active');
            }
            button.classList.add('active');
            
            // Update current metric
            currentMetric = button.getAttribute('data-metric');
            updateColors();
        }
        
        // Add event listeners using delegation for better WordPress compatibility
        var mapWrapper = document.querySelector('.map-wrapper');
        if (mapWrapper) {
            mapWrapper.addEventListener('click', handleStateClick);
        }
        
        var toggleContainer = document.querySelector('.metric-toggles');
        if (toggleContainer) {
            toggleContainer.addEventListener('click', handleMetricClick);
        }
        
        // Initialize colors
        updateColors();
        
        console.log('WordPress map initialized successfully!');
    }
    
    // Ensure DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        // DOM already loaded
        init();
    }
})();
</script>

<!-- ============================================= -->
<!-- COPY EVERYTHING ABOVE THIS LINE TO WORDPRESS -->
<!-- ============================================= -->

</body>
</html>